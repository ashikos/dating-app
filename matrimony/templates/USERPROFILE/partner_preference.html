<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacy & Settings</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Aldrich&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'assets/css/privacy_settings.css'%}">
    <style>

        body {
            background-color: #FAEAF4;
            font-family: Arial, sans-serif;
        }
        .tag {
            flex-grow: 1;
            text-align: center;
            font-size: 26px;
            color: rgb(0, 0, 0);
        }
        .topbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            font-weight: 600;
        }
        .menu {
            padding: 20px;
            padding-right: 0;
        }
        .settings-card {
            max-width: 700px;
            margin: 20px auto;
            
            border-top-left-radius: 40px;
            border-top-right-radius: 40px;
            background-color: white;
            padding: 20px;
        }
        .settings-card h5 {
            color: #6f42c1;
        }
        .settings-card .toggle-switch {
            display: inline-flex;
            align-items: center;
        }
        .settings-card .btn-reset {
            background-color: #6f42c1;
            color: white;
            border-radius: 25px;
            padding: 10px 20px;
        }
        .settings-card .btn-reset:hover {
            background-color: #5a3799;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
        }
        /* Hide default HTML checkbox */
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .no-wrap {
            white-space: nowrap;
        }
        /* The slider */
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #4A154B;
        }
        input:checked + .slider:before {
            transform: translateX(20px);
        }
        
        /* Responsive styling for screens with a max-width of 992px */
        @media (max-width: 992px) {
            body {
                background-color: #4A154B;
            }
            .settings-card {
                max-width: 600px;
                margin: 0 auto;
            }
            .tag{
                flex-grow: 1;
                text-align: left;
                font-size: 18px;
                padding-left: 45px;
                color: rgb(255, 255, 255);
               
            }
            .topbar{
                padding: 20px;
                display: flex;
                align-items: center;
                justify-content: space-between;
                width: 90%;
               padding-right: 0;
                
            }
        }
        
        .range-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .range-container label {
            font-weight: 600;
        }

  
        .range-slider {
            width: 100%;
            position: relative;
            height: 30px;
        }

        .range-slider input[type="range"] {
            position: absolute;
            pointer-events: none;
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            margin: 0;
            width: 100%;
            background: transparent;
            margin-top: 12px; 
        }

        .range-slider input[type="range"]::-webkit-slider-thumb {
            pointer-events: all;
            width: 20px;
            height: 20px;
            background-color: #5b5151;
            border-radius: 50%;
            cursor: pointer;
            -webkit-appearance: none;
            position: relative;
            z-index: 2;
           
        }

        .range-slider input[type="range"]::-moz-range-thumb {
            pointer-events: all;
            width: 20px;
            height: 20px;
            background-color: #5b5151;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            z-index: 2;
           
        }

        .range-slider input[type="range"]::-ms-thumb {
            pointer-events: all;
            width: 20px;
            height: 20px;
            background-color: #5b5151;
            border-radius: 50%;
            cursor: pointer;
            position: relative;
            z-index: 2;
           
        }

        .range-slider .range-track {
            width: 100%;
            height: 8px;
            background-color: #ddd;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
        }

        .range-slider .range-fill {
            position: absolute;
            height: 8px;
            background-color: #5b5151;
            z-index: 1;
            margin-top: 10px;
        }
        .range-slider .weight-fill {
            position: absolute;
            height: 8px;
            background-color: #5b5151;
            z-index: 1;
            margin-top: 10px;
        }
        .range-slider .age-fill{
            position: absolute;
            height: 8px;
            background-color: #5b5151;
            z-index: 1;
            margin-top: 10px;
        }

        .value-labels {
            display: flex;
            justify-content: space-between;
           
        }
        .selected-tags {
            margin-bottom: 10px;
        }

        .tag-badge {
            margin-right: 5px;
            background-color: #6c757d;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
        }

        .tag-badge .remove-tag {
            margin-left: 8px;
            cursor: pointer;
            font-size: 14px;
            color: white;
        }
    </style>
</head>
<body>
    {% include "shared/sidebar.html" %}
    <div class="topbar">
        <div class="menu">
            <a href="">
                <img src="{% static 'assets/img/search.png'%}" alt="Back">
            </a>
        </div>
        <div class="tag">
            <p class="mt-4">Partner Preference</p>
        </div>
    </div>
    <div class="settings-card card shadow-lg p-5">
        <label for="heightRange" class="form-label">Age</label>
        <div class="slider-container mb-2">
        <div class="range-slider" id="ageSlider">
            <div class="range-track"></div>
            <div class="age-fill"></div>
            <input type="range" id="ageMin" min="18" max="100" value="18">
            <input type="range" id="ageMax" min="18" max="100" value="100">
        </div>
        <div class="value-labels">
            <span id="ageMinLabel">18</span>
            <span id="ageMaxLabel">100</span>
        </div>
    </div>

        <div class=" mb-3">
            <label for="genderSelect" class="form-label">Gender</label>
            <select class="form-select" id="genderSelect">
                <option selected>Select Gender</option>
                <option value="1">Male</option>
                <option value="2">Female</option>
                <option value="3">Other</option>
            </select>
        </div>
        <div class="mb-3">
            <label for="locations" class="form-label">Locations</label>
           
            <select class="form-select " id="locations">
                <option disabled selected>Select Locations</option>
                <option value="Kochi">Kochi</option>
                <option value="Kollam">Kollam</option>
                <option value="Aluva">Aluva</option>
            </select>
            <div class="selected-tags mt-3" id="selected-locations">
                <!-- Selected tags will appear here -->
            </div>
        </div>

        <!-- Interest & Hobbies -->
        <div class="mb-3">
            <label for="interests" class="form-label">Interest & Hobbies</label>
            
            <select class="form-select" id="interests">
                <option disabled selected>Select Interest & Hobbies</option>
                <option value="Yoga">Yoga</option>
                <option value="Jazz">Jazz</option>
                <option value="Reading">Reading</option>
            </select>
            <div class="selected-tags mt-3" id="selected-interests">
                <!-- Selected tags will appear here -->
            </div>
        </div>

        <div class="mb-3">
            <label for="heightRange" class="form-label">Height (in cm)</label>
            <div class="slider-container">
                <div class="range-slider">
                    <div class="range-track"></div>
                    <div class="range-fill"></div>
                    <input type="range" id="rangeMin" min="0" max="250" value="25">
                    <input type="range" id="rangeMax" min="0" max="250" value="75">
                </div>
                <div class="value-labels">
                    <span id="minLabel">25</span>
                    <span id="maxLabel">75</span>
                </div>
            </div>
        </div>


        <!-- Weight -->
        <div class="mb-3">
            <label for="weightRange" class="form-label">Weight (in kg)</label>
          
            <div class="slider-container">
                <div class="range-slider">
                    <div class="range-track"></div>
                    <div class="weight-fill"></div>
                    <input type="range" id="weightMin" min="0" max="250" value="50">
                    <input type="range" id="weightMax" min="0" max="250" value="200">
                    
                </div>
                <div class="value-labels">
                    <span id="weightMinLabel">25</span>
                    <span id="weightMaxLabel">75</span>
                </div>
            </div>
        </div>

        <div class="mb-4">
            <label for="educationSelect" class="form-label">Education Level</label>
            <select class="form-select" id="educationSelect">
                <option selected>Select Education Level</option>
                <option value="1">High School</option>
                <option value="2">Associate Degree</option>
                <option value="3">Bachelor's Degree</option>
                <option value="4">Master's Degree</option>
                <option value="5">Doctorate</option>
                <option value="6">Vocational Training</option>
                <option value="7">Other</option>
            </select>
        </div>
        
       
       <div class="mb-4">
        <label for="lifestyleSelect" class="form-label">Lifestyle Choices</label>
        <select class="form-select" id="lifestyleSelect">
            <option selected>Select Lifestyle Choice</option>
            <option value="1">Vegetarian</option>
            <option value="2">Vegan</option>
            <option value="3">Omnivore</option>
            <option value="4">Pescatarian</option>
            <option value="5">Keto</option>
            <option value="6">Paleo</option>
            <option value="7">Other</option>
        </select>
    </div>
    
       <div class="mb-4">
        <label for="religionSelect" class="form-label">Religion</label>
        <select class="form-select" id="religionSelect">
            <option selected>Select Religion</option>
            <option value="1">Christianity</option>
            <option value="2">Islam</option>
            <option value="3">Hinduism</option>
            <option value="4">Buddhism</option>
            <option value="5">Judaism</option>
            <option value="6">Sikhism</option>
            <option value="7">Other</option>
        </select>
    </div>
    <div class="mb-4">
        <label for="occupationSelect" class="form-label">Occupation</label>
        <select class="form-select" id="occupationSelect">
            <option selected>Select Occupation</option>
            <option value="1">Engineer</option>
            <option value="2">Doctor</option>
            <option value="3">Teacher</option>
            <option value="4">Lawyer</option>
            <option value="5">Artist</option>
            <option value="6">Businessperson</option>
            <option value="7">Other</option>
        </select>
    </div>
    
       <div class="button-container">
        <button class="update-button">Update</button>
    </div>

    </div>

    {% include 'shared/navbar.html'%}

    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.3/nouislider.min.js"></script>
    <script>
        // Handle selection and display as tags
        function addTag(selectElement, containerId) {
            const selectedValue = selectElement.value;
            if (!selectedValue) return;

            const container = document.getElementById(containerId);
            const existingTags = container.querySelectorAll('.tag-badge');

            // Check if tag already exists
            for (let tag of existingTags) {
                if (tag.textContent.includes(selectedValue)) return;
            }

            const tag = document.createElement('span');
            tag.className = 'tag-badge';
            tag.innerHTML = `${selectedValue} <span class="remove-tag">&times;</span>`;

            // Add event listener to remove tag
            tag.querySelector('.remove-tag').addEventListener('click', function() {
                container.removeChild(tag);
            });

            container.appendChild(tag);

            // Reset select to default
            selectElement.selectedIndex = 0;
        }

        // Event listeners for dropdowns
        document.getElementById('locations').addEventListener('change', function() {
            addTag(this, 'selected-locations');
        });

        document.getElementById('interests').addEventListener('change', function() {
            addTag(this, 'selected-interests');
        });
    </script>
    
       
   <script>
    const rangeMin = document.getElementById('rangeMin');
const rangeMax = document.getElementById('rangeMax');
const rangeFill = document.querySelector('.range-fill');
const minLabel = document.getElementById('minLabel');
const maxLabel = document.getElementById('maxLabel');

function updateSlider() {
    const minValue = parseInt(rangeMin.value);
    const maxValue = parseInt(rangeMax.value);

    if (minValue > maxValue - 10) {
        rangeMin.value = maxValue - 10;
    }

    const rangeWidth = rangeMax.max - rangeMin.min;
    const left = (minValue / rangeWidth) * 100;
    const right = 100 - (maxValue / rangeWidth) * 100;

    rangeFill.style.left = left + '%';
    rangeFill.style.right = right + '%';

    minLabel.textContent = rangeMin.value;
    maxLabel.textContent = rangeMax.value;
}

rangeMin.addEventListener('input', updateSlider);
rangeMax.addEventListener('input', updateSlider);

updateSlider();


const weightMin = document.getElementById('weightMin');
const weightMax = document.getElementById('weightMax');
const weightFill = document.querySelector('.weight-fill'); // Update selector as needed
const weightMinLabel = document.getElementById('weightMinLabel');
const weightMaxLabel = document.getElementById('weightMaxLabel');

function updateWeightSlider() {
    const minValue = parseInt(weightMin.value);
    const maxValue = parseInt(weightMax.value);

    if (minValue > maxValue - 10) {
        weightMin.value = maxValue - 10;
    }

    const rangeWidth = weightMax.max - weightMin.min; // Adjusted to reflect max weight of 250
    const left = (minValue / rangeWidth) * 100;
    const right = 100 - (maxValue / rangeWidth) * 100;

    weightFill.style.left = left + '%';
    weightFill.style.right = right + '%';

    weightMinLabel.textContent = weightMin.value;
    weightMaxLabel.textContent = weightMax.value;
}

weightMin.addEventListener('input', updateWeightSlider);
weightMax.addEventListener('input', updateWeightSlider);

updateWeightSlider();

const ageMin = document.getElementById('ageMin');
    const ageMax = document.getElementById('ageMax');
    const ageFill = document.querySelector('.age-fill');
    const ageMinLabel = document.getElementById('ageMinLabel');
    const ageMaxLabel = document.getElementById('ageMaxLabel');

    // Function to update the age slider
    function updateAgeSlider() {
        const minValue = parseInt(ageMin.value);
        const maxValue = parseInt(ageMax.value);

        // Ensure minValue is not greater than maxValue - 10
        if (minValue > maxValue - 10) {
            ageMin.value = maxValue - 10;
        }

        // Calculate and set the fill width
        const rangeWidth = ageMax.max - ageMin.min;
        const minPercent = ((minValue - ageMin.min) / rangeWidth) * 100;
        const maxPercent = ((ageMax.max - maxValue) / rangeWidth) * 100;
    
        // Update the fill width and position
        ageFill.style.left = minPercent + '%';
        ageFill.style.width = (100 - minPercent - maxPercent) + '%';

        // Update labels
        ageMinLabel.textContent = minValue;
        ageMaxLabel.textContent = maxValue;
    }

    // Add event listeners to update slider on input change
    ageMin.addEventListener('input', updateAgeSlider);
    ageMax.addEventListener('input', updateAgeSlider);

    // Initialize the slider on page load
    updateAgeSlider();




   </script>
</body>
</html>
